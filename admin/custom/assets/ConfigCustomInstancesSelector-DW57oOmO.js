import{j as p}from"./jsx-runtime-DRs2ITYJ.js";import{C as u,a as O}from"./ConfigCustomKissHomeDefenderSet__loadShare___mf_0_mui_mf_1_icons_mf_2_material__loadShare__-7IQ5unOt.js";import{C as _}from"./ConfigCustomKissHomeDefenderSet__loadShare___mf_0_iobroker_mf_1_adapter_mf_2_react_mf_2_v5__loadShare__-CQ1_3aHH.js";import{C as D,a as P}from"./ConfigCustomKissHomeDefenderSet__mf_v__runtimeInit__mf_v__-CREQbT0Z.js";let $;const z=new Uint8Array(16);function U(){if(!$&&($=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!$))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $(z)}const y=[];for(let i=0;i<256;++i)y.push((i+256).toString(16).slice(1));function q(i,t=0){return y[i[t+0]]+y[i[t+1]]+y[i[t+2]]+y[i[t+3]]+"-"+y[i[t+4]]+y[i[t+5]]+"-"+y[i[t+6]]+y[i[t+7]]+"-"+y[i[t+8]]+y[i[t+9]]+"-"+y[i[t+10]]+y[i[t+11]]+y[i[t+12]]+y[i[t+13]]+y[i[t+14]]+y[i[t+15]]}const G=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),R={randomUUID:G};function I(i,t,n){if(R.randomUUID&&!i)return R.randomUUID();i=i||{};const a=i.random||(i.rng||U)();return a[6]=a[6]&15|64,a[8]=a[8]&63|128,q(a)}const{loadShare:N}=P,{initPromise:F}=D,X=F.then(i=>N("@iobroker/json-config",{customShareInfo:{shareConfig:{singleton:!0,strictVersion:!1,requiredVersion:"*"}}})),W=await X.then(i=>i());var b=W;const g={table:{minWidth:400},header:{fontSize:16,fontWeight:"bold"},td:{padding:"2px 16px"},vendor:{maxWidth:150,fontSize:12,textOverflow:"ellipsis",overflow:"hidden"}};async function B(i,t){const n=await i.getObjectViewSystem("state",`${t}.`,`${t}.香`),a=[],o=Object.keys(n).filter(d=>d.endsWith(".address"));for(let d=0;d<o.length;d++){const e=o[d],s=await i.getState(e);s!=null&&s.val&&a.push({ip:s.val,name:"homekit-controller"})}return a}async function H(i,t){const n=await i.getObjectViewSystem("state",`${t}.`,`${t}.香`),a=[],o=Object.keys(n).filter(d=>d.endsWith(".address"));for(let d=0;d<o.length;d++){const e=o[d],s=await i.getState(e);s!=null&&s.val&&a.push({ip:s.val,name:"homekit-controller"})}return a}async function J(i,t){const n=await i.getObjectViewSystem("state",`${t}.`,`${t}.香`),a=[],o=Object.keys(n).filter(d=>d.endsWith(".hostname"));for(let d=0;d<o.length;d++){const e=o[d],s=await i.getState(e);s!=null&&s.val&&a.push({ip:s.val,name:"shelly"})}return a}async function K(i,t){var d,e;const n=await i.getObjectViewSystem("state",`${t}.info.clients.`,`${t}.info.clients.香`),a=[],o=Object.values(n);for(let s=0;s<o.length;s++)(e=(d=o[s])==null?void 0:d.native)!=null&&e.ip&&a.push({ip:o[s].native.ip,name:t.split(".")[0]});return a}async function L(i,t){var d,e,s;const n=await i.getObjectViewSystem("device",`${t}.`,`${t}.香`),a=Object.values(n),o=[];for(let c=0;c<a.length;c++)((d=a[c])==null?void 0:d.type)==="device"&&((s=(e=a[c])==null?void 0:e.native)!=null&&s.ip)&&o.push({ip:a[c].native.ip,name:t.split(".")[0]});return o}const Y=[{adapter:"broadlink2",attr:"additional"},{adapter:"harmony",attr:"devices",arrayAttr:"ip"},{adapter:"hm-rpc",attr:"homematicAddress"},{adapter:"homeconnect",browse:H},{adapter:"homekit-controller",attr:"discoverIp",browse:B},{adapter:"hue",attr:"bridge"},{adapter:"knx",attr:"bind"},{adapter:"lgtv",attr:"ip"},{adapter:"loxone",attr:"host"},{adapter:"mihome-vacuum",attr:"ip"},{adapter:"modbus",attr:"params.bind",clients:!0},{adapter:"mqtt",attr:"url",clients:!0},{adapter:"mqtt-client",attr:"host"},{adapter:"lcn",attr:"host"},{adapter:"knx",attr:"gwip"},{adapter:"onvif"},{adapter:"openknx",attr:"gwip"},{adapter:"broadlink2",attr:"additional"},{adapter:"proxmox",attr:"ip"},{adapter:"samsung",attr:"ip"},{adapter:"shelly",browse:J},{adapter:"sonoff",clients:!0},{adapter:"sonos",attr:"devices",arrayAttr:"ip"},{adapter:"tr-064",attr:"iporhost"},{adapter:"unify",attr:"controllerIp"},{adapter:"upnp",browse:L},{adapter:"wled",attr:"devices",arrayAttr:"ip"},{adapter:"wifilight",attr:"devices",arrayAttr:"ip"}];function A(i){return i?typeof i!="string"?!1:(i=i.trim().toUpperCase().replace(/\s/g,""),!i||i.match(/^([0-9A-F]{2}[:-]){5}([0-9A-F]{2})$/)?!0:!!i.match(/^([0-9A-F]{12})$/)):!0}function j(i){return!i||!A(i)?i||"":(i=i.toUpperCase().trim().replace(/[\s:-]/g,""),i.replace(/(..)(..)(..)(..)(..)(..)/,"$1:$2:$3:$4:$5:$6"))}function T(i){return i?typeof i!="string"?!1:(i=i.trim(),i?i.match(/^\d+\.\d+\.\d+\.\d+$/)?!i.trim().split(".").map(n=>parseInt(n,10)).find(n=>n<0||n>255):!1:!0):!0}function V(i){return!i||!T(i)?i:i.trim().split(".").map(n=>parseInt(n,10)).join(".")}class S extends b.ConfigGeneric{resolveDone=!1;validateTimeout=null;statusPolling=null;async componentDidMount(){var c;super.componentDidMount();let t=[];const n=await this.props.oContext.socket.getObject(`system.adapter.kisshome-defender.${this.props.oContext.instance}`);if(n!=null&&n.common.host){const r=await this.props.oContext.socket.getObject(`system.host.${n.common.host}`);(c=r==null?void 0:r.common)!=null&&c.address&&(t=r.common.address)}const o=(await this.props.oContext.socket.getAdapterInstances()).filter(r=>{var l;return((l=r==null?void 0:r.common)==null?void 0:l.adminUI)&&(r.common.adminUI.config!=="none"||r.common.adminUI.tab)}).map(r=>({id:r._id.replace(/^system\.adapter\./,""),name:r.common.name,native:r.native})).sort((r,l)=>r.id>l.id?1:r.id<l.id?-1:0),d=b.ConfigGeneric.getValue(this.props.data,"devices")||[];d.forEach(r=>{r.uuid||(r.uuid=I())});const e=await this.collectIpAddresses(o,t,d),s={instances:o,ips:e,IP2MAC:{},MAC2VENDOR:{},alive:this.props.alive,resolving:!1,showMessage:!1,modelStatus:{}};this.resolveDone=!1,this.setState(s),await this.props.oContext.socket.subscribeState(`system.adapter.kisshome-defender.${this.props.oContext.instance}.alive`,this.onAliveChanged),this.props.alive&&this.resolveMACs(),this.disableFritzBox(),this.checkDevices(d),this.getModelStatus(),this.pollModelStatus()}getModelStatus(){this.state.alive&&this.props.oContext.socket.sendTo(`kisshome-defender.${this.props.oContext.instance}`,"getModelStatus",null).then(t=>{t.modelStatus&&this.setState({modelStatus:t.modelStatus})})}pollModelStatus(){this.state.alive?this.statusPolling||=setInterval(()=>{if(!this.state.alive){this.statusPolling&&(clearInterval(this.statusPolling),this.statusPolling=null);return}this.getModelStatus()},1e4):this.statusPolling&&(clearInterval(this.statusPolling),this.statusPolling=null)}resolveMACs(){this.resolveDone=!0,this.setState({runningRequest:!0},()=>{const t=[...b.ConfigGeneric.getValue(this.props.data,"devices")||[]],n=[];return t.forEach(a=>{const o=V(a.ip),d=j(a.mac);o&&T(o)?n.push({ip:o,mac:d}):d&&A(d)&&n.push({ip:o,mac:d})}),this.state.ips.forEach(a=>{const o=V(a.ip),d=j(a.mac);o&&T(o)&&!n.find(e=>e.ip===o)?n.push({ip:o,mac:d}):d&&A(d)&&!n.find(e=>e.ip===o)&&n.push({ip:o,mac:d})}),this.props.oContext.socket.sendTo(`kisshome-defender.${this.props.oContext.instance}`,"getMacForIps",n).then(a=>{var r;if(a!=null&&a.error){this.setState({runningRequest:!1});return}const o=a,d={...this.state.IP2MAC||{}},e={...this.state.MAC2VENDOR||{}},s=JSON.parse(JSON.stringify(this.state.ips));(r=o==null?void 0:o.result)==null||r.forEach(l=>{const h=l.ip,f=s.findIndex(x=>x.ip===h);f!==-1&&(s[f].mac=l.mac),d[V(h)]=l.mac,e[j(l.mac)]=l.vendor});let c=!1;t.forEach(l=>{const h=s.findIndex(f=>f.ip===l.ip);h!==-1&&s[h].mac&&l.mac!==s[h].mac&&(c=!0,l.mac=s[h].mac)}),this.setState({ips:s,IP2MAC:d,MAC2VENDOR:e,runningRequest:!1}),c&&this.onChange("devices",t)}).catch(a=>{a.toString()!=="no results"&&window.alert(`Cannot get MAC addresses: ${a}`),this.setState({runningRequest:!1})})})}static getAttr(t,n){if(Array.isArray(n)){const a=n.shift();return a&&typeof t[a]=="object"?S.getAttr(t[a],n):!n.length&&a?t[a]:null}return S.getAttr(t,n.split("."))}static isIp(t){if(typeof t=="string"){if(t.match(/^\d+\.\d+\.\d+\.\d+$/))return"ipv4";if(t.match(/^[\da-fA-F:]+$/))return"ipv6"}return null}componentWillUnmount(){super.componentWillUnmount(),this.props.oContext.socket.unsubscribeState(`system.adapter.kisshome-defender.${this.props.oContext.instance}.alive`,this.onAliveChanged),this.validateTimeout&&(clearTimeout(this.validateTimeout),this.validateTimeout=null),this.statusPolling&&(clearInterval(this.statusPolling),this.statusPolling=null)}onAliveChanged=(t,n)=>{this.state.alive!==!!(n!=null&&n.val)&&this.setState({alive:!!(n!=null&&n.val)},()=>{this.state.alive&&(this.resolveDone?this.validateAddresses():this.resolveMACs(),this.pollModelStatus())})};validateAddresses(){this.validateTimeout&&clearTimeout(this.validateTimeout),this.validateTimeout=setTimeout(()=>{if(this.validateTimeout=null,!this.state.alive)return;const t=[],n=b.ConfigGeneric.getValue(this.props.data,"devices")||[],a={...this.state.IP2MAC},o={...this.state.MAC2VENDOR};n.forEach(d=>{const e=V(d.ip),s=j(d.mac);e&&T(d.ip)&&!a[e]?(a[e]="-",t.push(d),d.mac&&A(d.mac)&&!o[s]&&(o[s]="-")):d.mac&&A(d.mac)&&!o[s]&&(o[s]="-",t.push(d))}),t.length&&this.setState({resolving:!0,IP2MAC:a,MAC2VENDOR:o},()=>{this.props.oContext.socket.sendTo(`kisshome-defender.${this.props.oContext.instance}`,"getMacForIps",t).then(d=>{var l;if(d!=null&&d.error){this.setState({resolving:!1});return}const e=d,s={...this.state.IP2MAC},c={...this.state.MAC2VENDOR};let r=!1;(l=e==null?void 0:e.result)==null||l.forEach(h=>{h.ip=j(h.ip),h.mac=j(h.mac),h.mac&&s[h.ip]!==h.mac&&(s[h.ip]=h.mac,r=!0),h.vendor&&c[h.mac]!==h.vendor&&(c[h.mac]=h.vendor,r=!0)}),r&&this.setState({IP2MAC:s,MAC2VENDOR:c,resolving:!1})})})},1e3)}async collectIpAddresses(t,n,a){let o=[];t||=this.state.instances;for(let e=0;e<t.length;e++){const s=Y.find(c=>c.adapter===t[e].name);if(s&&t[e].native){const c=s.attr;if(c&&t[e].native[c])if(s.arrayAttr){if(Array.isArray(t[e].native[c]))for(let r=0;r<t[e].native[c].length;r++){const l=t[e].native[c][r],h=S.getAttr(l,s.arrayAttr),f=S.isIp(h);if(f){const x=a.find(k=>k.ip===h);o.push({ip:h,type:f,desc:t[e].name,uuid:(x==null?void 0:x.uuid)||I()})}}}else{const r=S.getAttr(t[e].native,c),l=S.isIp(r);if(l){const h=a.find(f=>f.ip===r);o.push({ip:r,type:l,desc:t[e].name,uuid:(h==null?void 0:h.uuid)||I()})}}if(s.browse)try{(await s.browse(this.props.oContext.socket,t[e].id.replace("system.adapter.",""))).forEach(l=>{const h=S.isIp(l.ip);if(h){const f=a.find(x=>x.ip===l.ip);o.push({ip:l.ip,type:h,desc:l.name||t[e].name,uuid:(f==null?void 0:f.uuid)||I()})}})}catch(r){console.error(`Cannot collect "${JSON.stringify(t[e])}": ${r}`)}if(s.clients)try{(await K(this.props.oContext.socket,t[e].id.replace("system.adapter.",""))).forEach(l=>{const h=S.isIp(l.ip);if(h){const f=a.find(x=>x.ip===l.ip);o.push({ip:l.ip,type:h,desc:l.name||t[e].name,uuid:(f==null?void 0:f.uuid)||I()})}})}catch(r){console.error(`Cannot collect "${JSON.stringify(t[e])}": ${r}`)}}else if(t[e].native.ip&&typeof t[e].native.ip=="string"&&t[e].native.ip.match(/^\d+\.\d+\.\d+\.\d+$/)){const c=a.find(r=>r.ip===t[e].native.ip);o.push({ip:t[e].native.ip,type:"ipv4",desc:t[e].name,uuid:(c==null?void 0:c.uuid)||I()})}else if(t[e].native.host&&typeof t[e].native.host=="string"&&t[e].native.host.match(/^\d+\.\d+\.\d+\.\d+$/)){const c=a.find(r=>r.ip===t[e].native.host);o.push({ip:t[e].native.host,type:"ipv4",desc:t[e].name,uuid:(c==null?void 0:c.uuid)||I()})}}o=o.filter(e=>!n.includes(e.ip)&&e.ip!=="0.0.0.0"&&e.ip!=="localhost"&&e.ip!=="127.0.0.1"&&e.ip!=="::1"&&e.type==="ipv4");const d=[];for(let e=0;e<o.length;e++)d.find(s=>s.ip===o[e].ip)||d.push(o[e]);return d}renderMessage(){return this.state.showMessage?p.jsx(_.Message,{text:_.I18n.t("custom_kisshome_You cannot record the traffic of Fritz!Box"),onClose:()=>this.setState({showMessage:!1})}):null}disableFritzBox(){const t=b.ConfigGeneric.getValue(this.props.data,"devices")||[],n=b.ConfigGeneric.getValue(this.props.data,"fritzbox");let a=!1;t.forEach(o=>{o.ip===n&&o.enabled&&(a=!0,o.enabled=!1)}),a&&this.onChange("devices",t)}checkDevices(t){if(t.find(n=>(n.desc||"").length<3))this.props.onError("devices",_.I18n.t("custom_kisshome_name_too_short"));else if(t.find(n=>!n.ip&&!n.mac))this.props.onError("devices",_.I18n.t("custom_kisshome_name_ip_and_mac_missing"));else if(t.find(n=>!T(n.ip)))this.props.onError("devices",_.I18n.t("custom_kisshome_name_invalid_ip"));else if(t.find(n=>!A(n.mac)))this.props.onError("devices",_.I18n.t("custom_kisshome_name_invalid_mac"));else{const n=t.filter(a=>a.enabled&&a.ip).map(a=>a.ip);if(n.length!==new Set(n).size)this.props.onError("devices",_.I18n.t("custom_kisshome_duplicate_ip"));else{const a=t.filter(o=>o.enabled&&o.mac).map(o=>o.mac);a.length!==new Set(a).size?this.props.onError("devices",_.I18n.t("custom_kisshome_duplicate_mac")):this.props.onError("devices")}}}renderItem(){var d;const t=b.ConfigGeneric.getValue(this.props.data,"devices")||[],n=b.ConfigGeneric.getValue(this.props.data,"fritzbox");t.forEach(e=>{e.uuid||(e.uuid=I())});const a=this.state.ips?t.filter(e=>!this.state.ips.find(s=>s.ip===e.ip&&s.uuid===e.uuid)):t,o=t.every(e=>e.enabled)&&(this.state.ips?this.state.ips.every(e=>t.find(s=>s.ip===e.ip)):!0);return p.jsxs(u.TableContainer,{children:[this.renderMessage(),this.state.runningRequest||this.state.resolving?p.jsx(u.LinearProgress,{}):p.jsx("div",{style:{height:2,width:"100%"}}),p.jsxs(u.Table,{style:g.table,size:"small",children:[p.jsx(u.TableHead,{children:p.jsxs(u.TableRow,{children:[p.jsxs(u.TableCell,{style:{...g.header,width:120},children:[p.jsx(u.Checkbox,{title:o?_.I18n.t("custom_kisshome_unselect_all"):_.I18n.t("custom_kisshome_select_all"),checked:o,indeterminate:!o&&t.length>0,disabled:this.state.runningRequest,onClick:()=>{const e=[...b.ConfigGeneric.getValue(this.props.data,"devices")||[]];if(o){e.forEach(s=>s.enabled=!1);for(let s=e.length-1;s>=0;s--)this.state.ips.find(c=>c.ip===e[s].ip)&&e.splice(s,1)}else e.forEach(s=>s.enabled=!0),this.state.ips.forEach(s=>{!e.find(c=>s.ip===c.ip)&&s.ip!==n&&e.push({ip:s.ip,mac:s.mac,desc:s.desc,enabled:!0,uuid:s.uuid})}),e.forEach(s=>s.enabled=!0);this.onChange("devices",e)}}),p.jsx(u.Fab,{onClick:()=>{const e=[...b.ConfigGeneric.getValue(this.props.data,"devices")||[]];e.push({ip:"",mac:"",desc:"",enabled:!0,uuid:I()}),this.onChange("devices",e),this.checkDevices(e)},size:"small",disabled:this.state.runningRequest,children:p.jsx(O.Add,{})})]}),p.jsx(u.TableCell,{style:g.header,children:_.I18n.t("custom_kisshome_ip")}),p.jsx(u.TableCell,{style:g.header,children:_.I18n.t("custom_kisshome_mac")}),p.jsx(u.TableCell,{style:g.header,children:_.I18n.t("custom_kisshome_vendor")}),p.jsx(u.TableCell,{style:g.header,children:_.I18n.t("custom_kisshome_name")}),p.jsx(u.TableCell,{style:g.header,title:"custom_kisshome_training_status_tooltip",children:_.I18n.t("custom_kisshome_training_status")}),p.jsx(u.TableCell,{style:g.header})]})}),p.jsxs(u.TableBody,{children:[(d=this.state.ips)==null?void 0:d.map(e=>{var s,c,r;return p.jsxs(u.TableRow,{children:[p.jsx(u.TableCell,{scope:"row",style:g.td,children:p.jsx(u.Checkbox,{checked:!!((s=t.find(l=>l.uuid===e.uuid))!=null&&s.enabled),disabled:this.state.runningRequest,onClick:()=>{const l=[...b.ConfigGeneric.getValue(this.props.data,"devices")||[]],h=l.findIndex(f=>f.uuid===e.uuid);if(h===-1){const f=l.findIndex(x=>x.ip===e.ip);if(f!==-1){const x=JSON.parse(JSON.stringify(this.state.ips)),k=x.find(E=>E.uuid===e.uuid);k&&(k.uuid=l[f].uuid),l[f].enabled=!0,this.setState({ips:x},()=>this.onChange("devices",l))}else{if(e.ip===n){this.setState({showMessage:!0});return}l.push({ip:e.ip,mac:e.mac,desc:e.desc,enabled:!0,uuid:e.uuid})}}else l.splice(h,1);this.onChange("devices",l)}})}),p.jsx(u.TableCell,{style:g.td,children:e.ip}),p.jsx(u.TableCell,{style:g.td,children:e.mac||""}),p.jsx(u.TableCell,{style:{...g.td,...g.vendor},children:((c=this.state.MAC2VENDOR)==null?void 0:c[j(e.mac)])||""}),p.jsx(u.TableCell,{style:g.td,children:e.desc}),p.jsx(u.TableCell,{style:g.td,children:e.mac&&((r=this.state.modelStatus)!=null&&r[e.mac])?this.state.modelStatus[e.mac]:"--"}),p.jsx(u.TableCell,{style:g.td})]},e.uuid)}),a.map(e=>{var f,x,k,E;const s=V(e.ip),c=j(e.mac),r=(f=this.state.IP2MAC)==null?void 0:f[s],l=e.ip&&e.enabled&&t.filter(v=>e.ip===v.ip).length>1?_.I18n.t("custom_kisshome_duplicate_ip"):"",h=e.mac&&e.enabled&&t.filter(v=>e.mac===v.mac).length>1?_.I18n.t("custom_kisshome_duplicate_mac"):"";return p.jsxs(u.TableRow,{children:[p.jsx(u.TableCell,{scope:"row",style:g.td,children:p.jsx(u.Checkbox,{checked:!!e.enabled,disabled:this.state.runningRequest,onClick:()=>{const v=[...b.ConfigGeneric.getValue(this.props.data,"devices")||[]],m=v.find(C=>C.uuid===e.uuid);if(m){if(!m.enabled&&e.ip===n){this.setState({showMessage:!0});return}m.enabled=!m.enabled,this.onChange("devices",v)}}})}),p.jsx(u.TableCell,{style:g.td,children:p.jsx(u.TextField,{fullWidth:!0,error:!!l||!T(e.ip)||!e.ip&&!e.mac,helperText:l||(T(e.ip)?!e.ip&&!e.mac?_.I18n.t("custom_kisshome_name_ip_and_mac_missing"):"":_.I18n.t("custom_kisshome_name_invalid_ip")),value:e.ip,disabled:this.state.runningRequest,placeholder:"192.168.x.y",onChange:v=>{const m=[...b.ConfigGeneric.getValue(this.props.data,"devices")||[]],C=m.find(M=>M.uuid===e.uuid);C&&(C.ip=v.target.value,C.ip===n&&C.enabled&&setTimeout(()=>this.disableFritzBox(),300),this.onChange("devices",m),this.validateAddresses(),this.checkDevices(m))},onBlur:()=>{if(e.ip.trim()&&s!==e.ip){const v=[...b.ConfigGeneric.getValue(this.props.data,"devices")||[]],m=v.find(C=>C.uuid===e.uuid);m&&(m.ip=s,this.onChange("devices",v),this.checkDevices(v))}},variant:"standard"})}),p.jsx(u.TableCell,{style:g.td,children:p.jsx(u.TextField,{fullWidth:!0,value:e.mac,disabled:this.state.runningRequest,error:!!h||!A(e.mac)||!e.ip&&!e.mac,helperText:h||(A(e.mac)?!e.ip&&!e.mac?_.I18n.t("custom_kisshome_name_ip_and_mac_missing"):"":_.I18n.t("custom_kisshome_name_invalid_mac")),placeholder:r||"XX:XX:XX:XX:XX:XX",onChange:v=>{const m=[...b.ConfigGeneric.getValue(this.props.data,"devices")||[]],C=m.find(M=>M.uuid===e.uuid);C&&(C.mac=v.target.value,this.onChange("devices",m),this.validateAddresses(),this.checkDevices(m))},onBlur:()=>{if(e.mac.trim()){const v=c;if(v!==e.mac){const m=[...b.ConfigGeneric.getValue(this.props.data,"devices")||[]],C=m.find(M=>M.uuid===e.uuid);C&&(C.mac=v,this.onChange("devices",m),this.checkDevices(m))}}},variant:"standard"})}),p.jsx(u.TableCell,{style:{...g.td,...g.vendor},children:e.mac?((x=this.state.MAC2VENDOR)==null?void 0:x[c])||"":r&&((k=this.state.MAC2VENDOR)==null?void 0:k[r])||""}),p.jsx(u.TableCell,{style:g.td,children:p.jsx(u.TextField,{fullWidth:!0,value:e.desc,disabled:this.state.runningRequest,onChange:v=>{const m=[...b.ConfigGeneric.getValue(this.props.data,"devices")||[]],C=m.find(M=>M.uuid===e.uuid);C&&(C.desc=v.target.value,this.onChange("devices",m),this.checkDevices(m))},helperText:(e.desc||"").length>=3?"":_.I18n.t("custom_kisshome_name_too_short"),error:(e.desc||"").length<3,variant:"standard"})}),p.jsx(u.TableCell,{style:g.td,children:e.mac&&((E=this.state.modelStatus)!=null&&E[c])?this.state.modelStatus[c]:"--"}),p.jsx(u.TableCell,{style:g.td,children:p.jsx(u.IconButton,{disabled:this.state.runningRequest,onClick:()=>{const v=[...b.ConfigGeneric.getValue(this.props.data,"devices")||[]],m=v.findIndex(C=>C.uuid===e.uuid);m!==-1&&(v.splice(m,1),this.onChange("devices",v),this.checkDevices(v))},children:p.jsx(O.Delete,{})})})]},e.uuid)})]})]})]})}}export{S as C};
